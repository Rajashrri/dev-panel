import{u as f,b as w,j as s,N,B as S,c as k,r as g,R as L,C as x}from"./index-BcE8mFE5.js";import{C as c,R as y}from"./Row-DX5qT3xN.js";import{c as E,a as u,F as C,b as p,A as P,l as j,d as F}from"./index-CHmLReA6.js";import{I as R}from"./index-C9JA7DUl.js";import{F as l,a as b}from"./Form-BhfEOQae.js";import"./Fade-CWRKZ9G5.js";const T=()=>{const r=f(),{storeTokenInLS:o,storeTokenInLScustid:m}=w(),v=E().shape({email:u().email("Must be a valid email").required("Email is required"),password:u().min(8,"Password must be at least 8 characters").required("Password is required")}),I=async(e,{setSubmitting:n,setErrors:a})=>{console.log(e);try{const t=await fetch("http://localhost:5000/api/customerauth/customer-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await t.json();t.ok?(o(i.token),m(i.id),k.success("Email and Password Verified Successfully"),setTimeout(()=>{r("/dashboard")},2e3)):a({submit:i.message||"Login failed"})}catch{a({submit:"Server error. Please try again later."})}n(!1)};return s.jsx(C,{initialValues:{email:"",password:""},validationSchema:v,onSubmit:I,children:({errors:e,handleBlur:n,handleChange:a,handleSubmit:t,isSubmitting:i,touched:h})=>s.jsxs("form",{noValidate:!0,onSubmit:t,children:[s.jsxs(l.Group,{className:"mb-3",controlId:"email",children:[s.jsx(b,{controlId:"floatingInput",label:"Enter Email",className:"mb-3",children:s.jsx(l.Control,{type:"email",placeholder:"Enter Email",onBlur:n,onChange:a,name:"email"})}),h.email&&e.email&&s.jsxs("small",{className:"text-danger form-text d-flex justify-content-start align-items-center gap-1",children:[s.jsx(p,{}),e.email]})]}),s.jsxs(l.Group,{className:"mb-3",controlId:"password",children:[s.jsx(b,{controlId:"floatingInput",label:"Enter Password",className:"mb-3",children:s.jsx(l.Control,{type:"password",placeholder:"Enter Password",onBlur:n,onChange:a,name:"password"})}),h.password&&e.password&&s.jsxs("small",{className:"text-danger form-text d-flex justify-content-start align-items-center gap-1",children:[s.jsx(p,{})," ",e.password]})]}),["checkbox"].map(d=>s.jsxs("div",{className:"mb-0 mt-4 d-flex justify-content-between align-items-center gap-5",children:[s.jsx(l.Check,{type:d,id:`default-${d}`,label:"Remember me"}),s.jsx("span",{className:"mb-0 text-muted forgot",children:s.jsxs(N,{to:"/auth/forgotpassword",className:"text-muted",children:[s.jsx(R,{})," Forgot your password?"]})})]},`default-${d}`)),e.submit&&s.jsx(c,{sm:12,children:s.jsx(P,{children:e.submit})}),s.jsx(y,{className:"mt-4",children:s.jsx(c,{mt:2,children:s.jsx(S,{className:"btn-block mb-4",color:"primary",disabled:i,size:"large",type:"submit",variant:"primary",children:"Log In"})})})]})})},_=()=>{const{isLoggedIn:r}=w(),o=f();return g.useEffect(()=>{r&&o("/dashboard")},[r,o]),g.useEffect(()=>{const m=new Image;m.src=j},[]),s.jsx(L.Fragment,{children:s.jsx("div",{className:"auth-wrapper",children:s.jsxs(y,{className:"auth-row",children:[s.jsxs(c,{sm:12,md:6,className:"image p-0",children:[s.jsx("img",{src:F,alt:"Login",loading:"lazy",width:"600",height:"400"}),s.jsx("div",{className:"copyright_form",children:s.jsxs("p",{children:["Copyright Â© ",new Date().getFullYear()," Dev Panel. All Rights Reserved. Powered By:"," ",s.jsx(N,{to:"https://www.digihost.in/",target:"_blank",children:"DigiHost Tech Solutions Pvt. Ltd."})]})})]}),s.jsx(c,{sm:12,md:6,className:"col-12 auth-content",children:s.jsx(x,{className:"borderless d-flex align-items-center justify-content-center",children:s.jsxs(x.Body,{children:[s.jsx("div",{className:"",children:s.jsxs("div",{className:"mb-4 text-center",children:[s.jsxs("div",{className:"logo",children:[s.jsx("img",{src:j,alt:"Logo",width:"200",height:"50"})," "]}),s.jsx("h5",{className:"mt-1",children:"Welcome Back!"}),s.jsx("p",{children:"Sign in to continue to DiigiiHost."})]})}),s.jsx(T,{})]})})})]})})})};export{_ as default};
