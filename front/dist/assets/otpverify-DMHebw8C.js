import{u as j,a as b,j as e,R as f,N,C as n,B as y,b as o}from"./index-CqonvCgs.js";import{c as v,a as S,l as O,F as w,b as F,A as T}from"./index-Dtd34VlA.js";import{l as C}from"./logo-BPvrImub.js";import{R as c,C as r}from"./Row-kCx33sI5.js";import{F as m,a as I}from"./Form-BsIrG47u.js";import"./CloseButton-CRqNhKfH.js";import"./setPrototypeOf-DgZC2w_0.js";const L=()=>{const d=j(),h=JSON.parse(localStorage.getItem("otpemail")),{storeTokenInLS:p}=b(),u=v().shape({otp:S().min(6,"Otp must be at least 6 characters").max(6,"Otp must be 6 characters").required("OTP is required")}),x=async(s,{setSubmitting:i,setErrors:l})=>{console.log(JSON.parse(localStorage.getItem("otpemail")));try{const a=await fetch("http://localhost:5000/api/auth/authverify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h,...s})}),t=await a.json();a.ok?t.msg===!0?(p(t.token),o.success("Otp Verified Successfully"),setTimeout(()=>{d("/company/create-new-project")},2e3)):o.error("Incorrect Otp/Timed Out"):o.error(t.extraDetails?t.extraDetails:t.message)}catch(a){console.error("Frontend Error:",a),l({submit:"Server error. Please try again later."})}i(!1)};return e.jsx(f.Fragment,{children:e.jsx("div",{className:"auth-wrapper",children:e.jsxs(c,{className:"auth-row",children:[e.jsxs(r,{sm:6,className:"image p-0",children:[e.jsx("img",{src:O,alt:""}),e.jsx("div",{className:"copyright_form",children:e.jsxs("p",{children:["Copyright Â© ",new Date().getFullYear()," Dev Panel. All Rights Reserved. Powered By:"," ",e.jsx(N,{to:"https://www.digihost.in/",targe:"_blank",children:"DigiHost Tech Solutions Pvt. Ltd."})]})})]}),e.jsx(r,{sm:6,className:"p-0",children:e.jsx("div",{className:"auth-content",children:e.jsx(n,{className:"borderless d-flex align-items-center justify-content-center",children:e.jsxs(n.Body,{className:"",children:[e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("div",{className:"logo",children:e.jsx("img",{src:C,alt:""})}),e.jsx("h5",{className:"mt-1",children:"OTP Verification !"}),e.jsx("p",{children:"Complete verification to continue to DiigiiHost."})]}),e.jsx(w,{initialValues:{otp:""},validationSchema:u,onSubmit:x,children:({errors:s,touched:i,handleBlur:l,handleChange:a,handleSubmit:t,isSubmitting:g,setFieldValue:P})=>e.jsxs("form",{noValidate:!0,onSubmit:t,children:[e.jsxs(m.Group,{className:"mb-3",controlId:"otp",children:[e.jsx(I,{controlId:"floatingInput",label:"Enter OTP",className:"mb-3",children:e.jsx(m.Control,{type:"text",placeholder:"Enter otp",onBlur:l,onChange:a,name:"otp"})}),i.otp&&s.otp&&e.jsxs("small",{className:"text-danger form-text d-flex justify-content-start align-items-center gap-1",children:[e.jsx(F,{}),s.otp]})]}),s.submit&&e.jsx(r,{sm:12,children:e.jsx(T,{variant:"danger",children:s.submit})}),e.jsx(c,{className:"mt-4",children:e.jsx(r,{sm:12,className:"text-center",children:e.jsx(y,{className:"btn-block",color:"primary",disabled:g,size:"lg",type:"submit",variant:"primary",children:"Submit"})})})]})})]})})})})]})})})};export{L as default};
