import{r as m,j as e,C as S,B as F,b as k}from"./index-CqonvCgs.js";import"./react-datepicker-BBwLDICz.js";import{S as P}from"./react-select.esm-C0W1OJnW.js";import{F as c}from"./Form-BsIrG47u.js";import{R as p,C as i}from"./Row-kCx33sI5.js";import"./setPrototypeOf-DgZC2w_0.js";const T=()=>{const g=[{value:"Number",label:"Number"},{value:"Text",label:"Text"},{value:"Password",label:"Password"}];m.useState(!1),m.useState(null),m.useState({name:"",details:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""});const[l,b]=m.useState({name:"",features:[],selectedFeatureData:[]}),d=a=>{let s=a.target.name,t=a.target.value;b({...l,[s]:t})},[v,R]=m.useState([]),o=(a,s,t)=>{const{value:n}=a.target;b(r=>{const h=r.selectedFeatureData.map((x,j)=>j===s?{...x,[t]:n}:x);return{...r,selectedFeatureData:h}})},I=async()=>{try{const s=await(await fetch("http://localhost:5000/api/package/getdataOptions",{method:"GET",headers:{"Content-Type":"application/json"}})).json(),t=Array.isArray(s.msg)?s.msg.map(n=>{var r,h,x,j,C,f,y,E;return{value:n._id,label:((r=n.name)==null?void 0:r.trim())||n.name,details:((h=n.details)==null?void 0:h.trim())||n.details,actualinr:((x=n.actualinr)==null?void 0:x.trim())||n.actualinr,membersinr:((j=n.membersinr)==null?void 0:j.trim())||n.membersinr,brcoinsinr:((C=n.brcoinsinr)==null?void 0:C.trim())||n.brcoinsinr,actualusd:((f=n.actualusd)==null?void 0:f.trim())||n.actualusd,membersusd:((y=n.membersusd)==null?void 0:y.trim())||n.membersusd,brcoinsusd:((E=n.brcoinsusd)==null?void 0:E.trim())||n.brcoinsusd}}):[];R(t)}catch(a){console.error("Error fetching options:",a)}},[u,N]=m.useState({}),D=async a=>{a.preventDefault();const s={};if(l.name||(s.name="Name is required"),l.features||(s.features="Fixed Features are required"),l.task||(s.task="Task is required"),Object.keys(s).length>0){N(s);return}const t=l.selectedFeatureData.map(r=>({id:r.value,itemname:r.label,actualinr:r.actualinr||"0",membersinr:r.membersinr||"0",brcoinsinr:r.brcoinsinr||"0",actualusd:r.actualusd||"0",membersusd:r.membersusd||"0",brcoinsusd:r.brcoinsusd||"0"})),n={name:l.name,task:l.task,features:Array.isArray(l.features)?l.features:[],actualinr:l.actualinr,membersinr:l.membersinr,brcoinsinr:l.brcoinsinr,actualusd:l.actualusd,membersusd:l.membersusd,brcoinsusd:l.brcoinsusd,featureDetails:t};try{const r=await fetch("http://localhost:5000/api/package/addpackage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),h=await r.json();r.ok?(k.success("Package Added successfully!"),N(""),b({name:"",features:[],selectedFeatureData:[],task:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""}),fetchData()):k.error(h.msg)}catch(r){console.error("Add Package Error:",r)}};return m.useEffect(()=>{I()},[]),e.jsx(e.Fragment,{children:e.jsx(c,{onSubmit:D,children:e.jsx(p,{className:"mb-5 form-templates",children:e.jsx(i,{lg:12,children:e.jsx(S,{children:e.jsx(S.Body,{children:e.jsxs(p,{className:"mb-3 align-items-center",children:[e.jsx(i,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(c.Label,{children:"Package Name"}),e.jsx(c.Control,{name:"name",value:l.name,onChange:d,type:"text",placeholder:"Enter Package Name"}),u.name&&e.jsx("span",{className:"text-danger",children:u.name})]})}),e.jsx(i,{md:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(c.Label,{children:"Select Task Group"}),e.jsx(P,{options:g,name:"task",value:g.find(a=>a.value===l.task)||null,onChange:a=>b({...l,task:a?a.value:""})}),u.task&&e.jsx("span",{className:"text-danger",children:u.task})]})}),e.jsx(i,{md:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(c.Label,{children:"Select Fixed Features"}),e.jsx(P,{options:v,isMulti:!0,value:v.filter(a=>{var s;return(s=l.features)==null?void 0:s.includes(a.value)})||[],name:"features",onChange:a=>{const s=a?a.map(n=>n.value):[],t=v.filter(n=>s.includes(n.value));b(n=>({...n,features:s,selectedFeatureData:t.map(r=>({value:r.value,label:r.label,actualinr:r.actualinr,membersinr:r.membersinr,brcoinsinr:r.brcoinsinr,actualusd:r.actualusd,membersusd:r.membersusd,brcoinsusd:r.brcoinsusd}))}))},placeholder:"Choose..."}),u.features&&e.jsx("span",{className:"text-danger",children:u.features})]})}),l.selectedFeatureData.map((a,s)=>e.jsx(i,{md:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"card_wrapper",children:[e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:"Feature Name :"}),e.jsx("h5",{children:a.label})]}),e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:"Actual Price INR :"}),e.jsxs("div",{children:[e.jsx(c.Control,{type:"hidden",name:`itemid[${s}]`,value:a.value}),e.jsx(c.Control,{type:"text",name:`actualinrpackage[${s}]`,value:a.actualinr,onChange:t=>o(t,s,"actualinr"),placeholder:"Enter INR Price"})]})]}),e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:"Members Only Price INR :"}),e.jsx("div",{children:e.jsx(c.Control,{type:"text",name:`membersinrpackage[${s}]`,value:a.membersinr,onChange:t=>o(t,s,"membersinr"),placeholder:"Enter INR Price"})})]}),e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:"BR Coins Price INR :"}),e.jsx("div",{children:e.jsx(c.Control,{type:"text",name:`brcoinsinrpackage[${s}]`,value:a.brcoinsinr,onChange:t=>o(t,s,"brcoinsinr"),placeholder:"Enter INR Price"})})]}),e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:"Actual Price USD :"}),e.jsx("div",{children:e.jsx(c.Control,{type:"text",name:`actualusdpackage[${s}]`,value:a.actualusd,onChange:t=>o(t,s,"actualusd"),placeholder:"Enter USD Price"})})]}),e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:"Members Only USD :"}),e.jsx("div",{children:e.jsx(c.Control,{type:"text",name:`membersusdpackage[${s}]`,value:a.membersusd,onChange:t=>o(t,s,"membersusd"),placeholder:"Enter USD Price"})})]}),e.jsxs("div",{className:"info",children:[e.jsx("h3",{children:"BR Coins Price USD :"}),e.jsx("div",{children:e.jsx(c.Control,{type:"text",name:`brcoinsusdpackage[${s}]`,value:a.brcoinsusd,onChange:t=>o(t,s,"brcoinsusd"),placeholder:"Enter USD Price"})})]})]})})},s)),e.jsxs(p,{children:[e.jsx("h5",{children:"Pricing"}),e.jsx("h6",{children:"INR"}),e.jsx(i,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(c.Label,{children:"Actual"}),e.jsx(c.Control,{type:"text",value:l.actualinr,onChange:d,name:"actualinr",placeholder:"Actual"})]})})}),e.jsx(i,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(c.Label,{children:"MEMBERS ONLY PRICE"}),e.jsx(c.Control,{type:"text",value:l.membersinr,onChange:d,name:"membersinr",placeholder:"MEMBERS ONLY PRICE"})]})})}),e.jsx(i,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(c.Label,{children:"BR COINS PRICE"}),e.jsx(c.Control,{type:"text",value:l.brcoinsinr,onChange:d,name:"brcoinsinr",placeholder:"BR COINS PRICE"})]})})})]}),e.jsxs(p,{children:[e.jsx("h6",{children:"USD"}),e.jsx(i,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(c.Label,{children:"Actual"}),e.jsx(c.Control,{type:"text",value:l.actualusd,onChange:d,name:"actualusd",placeholder:"Actual"})]})})}),e.jsx(i,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(c.Label,{children:"MEMBERS ONLY PRICE"}),e.jsx(c.Control,{type:"text",value:l.membersusd,onChange:d,name:"membersusd",placeholder:"MEMBERS ONLY PRICE"})]})})}),e.jsx(i,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(c.Label,{children:"BR COINS PRICE"}),e.jsx(c.Control,{type:"text",value:l.brcoinsusd,onChange:d,name:"brcoinsusd",placeholder:"BR COINS PRICE"})]})})})]}),e.jsx("div",{className:"text-end",children:e.jsx(F,{type:"submit",className:"waves-effect waves-light",variant:"primary",children:"Submit"})})]})})})})})})})};export{T as default};
