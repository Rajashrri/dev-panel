import{r as c,j as e,C,B as L,b as d}from"./index-CqonvCgs.js";import{a as W,h as U}from"./index-D378bV6i.js";import{X}from"./index.es-CzlDxkiB.js";import{M as h}from"./Modal-BVFbfr82.js";import{d as z}from"./delete-D3wlxJ1G.js";import{S as B}from"./react-select.esm-C0W1OJnW.js";import{a as K}from"./index.prod-CZpgVryd.js";import{C as V}from"./Container-DWnyZsub.js";import{R as j,C as o}from"./Row-kCx33sI5.js";import{F as l}from"./Form-BsIrG47u.js";import"./CloseButton-CRqNhKfH.js";import"./setPrototypeOf-DgZC2w_0.js";const ue=()=>{const[b,T]=c.useState(""),[q,Z]=c.useState(["search-input"]),[v,S]=c.useState([]),[w,g]=c.useState(!1),[P,y]=c.useState(!1),E=()=>g(!1),f=()=>{y(!1),I(null),u({name:"",details:"",quantity:"",template:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""})},[R,I]=c.useState(null),k=[{value:"Single Qty",label:"Single Qty"},{value:"Multiple Qty",label:"Multiple Qty"}],A=[{value:"Within the template",label:"Within the template"},{value:"Outside the template",label:"Outside the template"}];c.useState([]);const M=s=>{T(s.target.value)},D=()=>{},O=s=>{g(s)},_=async s=>{try{const t=await fetch(`http://localhost:5000/api/package/deleteaddons/${s}`,{method:"DELETE"}),a=await t.json();t.ok==!0?(p(),g(""),d.success("Selected data Deleted Successfully"),S(r=>r.filter(x=>x._id!==s))):d.error(a.extraDetails?a.extraDetails:a.message)}catch(t){console.log(t)}},H=async s=>{try{const a=await(await fetch(`http://localhost:5000/api/package/getaaddonsByid/${s}`,{method:"GET"})).json();u({name:a.msg[0].name,details:a.msg[0].details,quantity:a.msg[0].quantity,template:a.msg[0].template,actualinr:a.msg[0].actualinr,membersinr:a.msg[0].membersinr,brcoinsinr:a.msg[0].brcoinsinr,actualusd:a.msg[0].actualusd,membersusd:a.msg[0].membersusd,brcoinsusd:a.msg[0].brcoinsusd}),I(a.msg[0]._id),y(!0)}catch(t){console.log(t)}},F=async(s,t)=>{s==1?s=0:s=1;try{const a=await fetch("http://localhost:5000/api/package/update-statusAddnons",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,id:t})}),r=await a.json();a.ok==!0?(p(),d.success("Addons Status updated Successfully")):d.error(r.extraDetails?r.extraDetails:r.message)}catch(a){d.error("Error updating status. Please try again!"),console.error("Error updating status:",a)}},p=async()=>{try{const s=await fetch("http://localhost:5000/api/package/getdataaddons",{method:"GET"});if(!s.ok)throw new Error(`Error: ${s.status}`);const t=await s.json();S(t.msg)}catch(s){console.error("Error fetching data:",s),console.log("Failed to load data. Please try again later.")}};c.useEffect(()=>{p()},[]);const Q=[{name:"Sr No #",selector:(s,t)=>t+1,sortable:!0,width:"300px"},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Current Status",selector:s=>e.jsx("div",{className:"checkboxes module-switch",children:e.jsx("label",{className:"switch-label",children:e.jsx(K,{onChange:()=>F(s.status,s._id),checked:s.status==1})},s._id)}),sortable:!0},{name:"Actions",cell:s=>e.jsxs("div",{className:"module-action",children:[e.jsx("button",{onClick:()=>H(s._id),className:"btn btn-action",title:"Edit Item Master",children:e.jsx(W,{})}),e.jsx("a",{className:"btn btn-action",title:"Delete Product",variant:"primary",onClick:()=>O(s._id),children:e.jsx(U,{})})]}),style:{textAlign:"right"}}],Y={rows:{style:{minHeight:"20px"}},headCells:{style:{fontWeight:"bold",fontSize:"16px",backgroundColor:"#e3f2fd"}},pagination:{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"0 5px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"}}},$=c.useMemo(()=>v.filter(s=>s.name.toLowerCase().includes(b.toLowerCase())),[b,v]),G=()=>{y(!0)},[n,u]=c.useState({name:"",details:"",quantity:"",template:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""}),m=s=>{let t=s.target.name,a=s.target.value;u({...n,[t]:a})},[i,N]=c.useState({}),J=async s=>{s.preventDefault();const t={};if(n.name||(t.name="Name is required"),n.details||(t.details="Details is required"),n.quantity||(t.quantity="Quantity is required"),n.template||(t.template="Template  is required"),Object.keys(t).length>0)N(t);else{const a=R;if(a)try{const r=await fetch(`http://localhost:5000/api/package/updateAddons/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),x=await r.json();r.ok==!0?(f(),d.success("Addons Update succesfully"),N(""),u({name:"",details:"",quantity:"",template:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""}),p()):d.error(x.msg)}catch(r){console.log("edit Features",r)}else try{const r=await fetch("http://localhost:5000/api/package/addaddons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),x=await r.json();r.ok==!0?(f(),d.success("Addons Added successfully!"),N(""),u({name:"",details:"",quantity:"",template:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""}),p()):d.error(x.msg)}catch(r){console.log("Add Features",r)}}};return e.jsxs(V,{className:"list-module-preview",children:[e.jsx(j,{children:e.jsx(o,{lg:12,children:e.jsxs(C,{className:"create_new_page_card add-module module-list",children:[e.jsx(C.Header,{children:e.jsxs(j,{className:"justify-content-between",children:[e.jsx(o,{md:12,children:e.jsx("h3",{children:"Addons List"})}),e.jsx(o,{md:6,children:e.jsx("div",{className:"dt-buttons btn-group",children:e.jsx(L,{onClick:G,className:"btn btn-outline-secondary",children:"Add Addons"})})}),e.jsx(o,{md:6,className:"text-end",children:e.jsx("div",{className:"data_tableHeader",children:e.jsx("div",{id:"main-search",className:q.join(" "),children:e.jsxs("div",{className:"input-group",onClick:D,children:[e.jsx("span",{onKeyDown:D,role:"button",tabIndex:"0",className:"input-group-append search-btn",style:{borderRadius:"50%",marginRight:15},children:e.jsx("i",{className:"feather icon-search input-group-text"})}),e.jsx(l.Control,{type:"text",id:"m-search",placeholder:"Search Feature Name",value:b,onChange:M})]})})})})]})}),e.jsx(C.Body,{children:e.jsx(X,{columns:Q,data:$,customStyles:Y,pagination:!0,responsive:!0,striped:!0,paginationComponentOptions:{rowsPerPageText:"Rows per page:",rangeSeparatorText:"of"}})})]})})}),e.jsxs(h,{show:P,onHide:f,className:"other-icon-modal",children:[e.jsx(h.Header,{closeButton:!0}),e.jsxs(h.Body,{children:[e.jsxs("h3",{children:[R?"Edit":"Add"," Addons List"]}),e.jsxs("form",{onSubmit:J,children:[e.jsxs(j,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:" Name"}),e.jsx(l.Control,{type:"text",value:n.name||"",onChange:m,name:"name",placeholder:"Name"}),i.name&&e.jsx("span",{className:"text-danger",children:i.name})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"Description"}),e.jsx(l.Control,{as:"textarea",rows:6,value:n.details||"",onChange:m,name:"details",placeholder:"Description"}),i.details&&e.jsx("span",{className:"text-danger",children:i.details})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"Select Quantity"}),e.jsx(B,{options:k,name:"quantity",value:k.find(s=>s.value===n.quantity)||null,onChange:s=>u({...n,quantity:s?s.value:""})}),i.quantity&&e.jsx("span",{className:"text-danger",children:i.quantity})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"Select Template "}),e.jsx(B,{options:A,name:"template",value:A.find(s=>s.value===n.template)||null,onChange:s=>u({...n,template:s?s.value:""})}),i.template&&e.jsx("span",{className:"text-danger",children:i.template})]})}),e.jsx("h5",{children:" PRICING"}),e.jsx("h6",{children:"INR"}),e.jsx(o,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"Actual"}),e.jsx(l.Control,{type:"text",value:n.actualinr||"",onChange:m,name:"actualinr",placeholder:"Actual"}),i.actualinr&&e.jsx("span",{className:"text-danger",children:i.actualinr})]})})}),e.jsx(o,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"MEMBERS ONLY PRICE"}),e.jsx(l.Control,{type:"text",value:n.membersinr||"",onChange:m,name:"membersinr",placeholder:"MEMBERS ONLY PRICE"})]})})}),e.jsx(o,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"BR COINS PRICE"}),e.jsx(l.Control,{type:"text",value:n.brcoinsinr||"",onChange:m,name:"brcoinsinr",placeholder:"BR COINS PRICE"})]})})}),e.jsxs(j,{children:[e.jsx("h6",{children:"USD"}),e.jsx(o,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"Actual"}),e.jsx(l.Control,{type:"text",value:n.actualusd||"",onChange:m,name:"actualusd",placeholder:"Actual"}),i.actualinr&&e.jsx("span",{className:"text-danger",children:i.actualinr})]})})}),e.jsx(o,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"MEMBERS ONLY PRICE"}),e.jsx(l.Control,{type:"text",value:n.membersusd||"",onChange:m,name:"membersusd",placeholder:"MEMBERS ONLY PRICE"})]})})}),e.jsx(o,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(l.Label,{children:"BR COINS PRICE"}),e.jsx(l.Control,{type:"text",value:n.brcoinsusd||"",onChange:m,name:"brcoinsusd",placeholder:"BR COINS PRICE"})]})})})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(L,{variant:"primary",type:"submit",children:"Submit"})})]})]})]}),e.jsxs(h,{show:w,onHide:E,className:"delete-modal",children:[e.jsx(h.Header,{closeButton:!0}),e.jsxs(h.Body,{children:[e.jsx("h3",{children:"Do you really want to delete the file?"}),e.jsx("img",{src:z,alt:"Delete"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button-delete",onClick:()=>_(w),children:"Yes delete the file"}),e.jsx("button",{className:"button-cancel",onClick:()=>E(),children:"Cancel this time"})]})]})]})]})};export{ue as default};
