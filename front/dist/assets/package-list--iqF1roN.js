import{r,j as e,C as h,L as f,b as n}from"./index-CqonvCgs.js";import{a as _,h as T}from"./index-D378bV6i.js";import{X as R}from"./index.es-CzlDxkiB.js";import{M as m}from"./Modal-BVFbfr82.js";import{d as H}from"./delete-D3wlxJ1G.js";import{a as L}from"./index.prod-CZpgVryd.js";import{C as A}from"./Container-DWnyZsub.js";import{R as y,C as l}from"./Row-kCx33sI5.js";import{F}from"./Form-BsIrG47u.js";import"./CloseButton-CRqNhKfH.js";import"./setPrototypeOf-DgZC2w_0.js";const q=()=>{const[c,b]=r.useState(""),[C,B]=r.useState(["search-input"]),[p,u]=r.useState([]),[x,i]=r.useState(!1),g=()=>i(!1),k=t=>{b(t.target.value)},j=()=>{},N=t=>{i(t)},w=async t=>{try{const a=await fetch(`http://localhost:5000/api/package/deletepackage/${t}`,{method:"DELETE"}),s=await a.json();a.ok==!0?(d(),i(""),n.success("Selected data Deleted Successfully"),u(o=>o.filter(P=>P._id!==t))):n.error(s.extraDetails?s.extraDetails:s.message)}catch(a){console.log(a)}},S=async(t,a)=>{t==1?t=0:t=1;try{const s=await fetch("http://localhost:5000/api/package/update-statusPackage",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t,id:a})}),o=await s.json();s.ok==!0?(d(),n.success("Package Status updated Successfully")):n.error(o.extraDetails?o.extraDetails:o.message)}catch(s){n.error("Error updating status. Please try again!"),console.error("Error updating status:",s)}},d=async()=>{try{const t=await fetch("http://localhost:5000/api/package/getdatpackage",{method:"GET"});if(!t.ok)throw new Error(`Error: ${t.status}`);const a=await t.json();u(a.msg)}catch(t){console.error("Error fetching data:",t),console.log("Failed to load data. Please try again later.")}};r.useEffect(()=>{d()},[]);const E=[{name:"Sr No #",selector:(t,a)=>a+1,sortable:!0,width:"300px"},{name:"Name",selector:t=>t.name,sortable:!0},{name:"Current Status",selector:t=>e.jsx("div",{className:"checkboxes module-switch",children:e.jsx("label",{className:"switch-label",children:e.jsx(L,{onChange:()=>S(t.status,t._id),checked:t.status==1})},t._id)}),sortable:!0},{name:"Actions",cell:t=>e.jsxs("div",{className:"module-action",children:[e.jsx(f,{to:`/packages/edit-package/${t._id}`,className:"btn btn-action",title:"Edit Package",children:e.jsx(_,{})}),e.jsx("a",{className:"btn btn-action",title:"Delete Product",variant:"primary",onClick:()=>N(t._id),children:e.jsx(T,{})})]}),style:{textAlign:"right"}}],D={rows:{style:{minHeight:"20px"}},headCells:{style:{fontWeight:"bold",fontSize:"16px",backgroundColor:"#e3f2fd"}},pagination:{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"0 5px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"}}},v=r.useMemo(()=>p.filter(t=>t.name.toLowerCase().includes(c.toLowerCase())),[c,p]);return e.jsxs(A,{className:"list-module-preview",children:[e.jsx(y,{children:e.jsx(l,{lg:12,children:e.jsxs(h,{className:"create_new_page_card add-module module-list",children:[e.jsx(h.Header,{children:e.jsxs(y,{className:"justify-content-between",children:[e.jsx(l,{md:12,children:e.jsx("h3",{children:"Package List"})}),e.jsx(l,{md:6,children:e.jsx("div",{className:"dt-buttons btn-group",children:e.jsx(f,{to:"/packages/add-package",className:"btn btn-outline-secondary",title:"Add Package",children:"Add Package"})})}),e.jsx(l,{md:6,className:"text-end",children:e.jsx("div",{className:"data_tableHeader",children:e.jsx("div",{id:"main-search",className:C.join(" "),children:e.jsxs("div",{className:"input-group",onClick:j,children:[e.jsx("span",{onKeyDown:j,role:"button",tabIndex:"0",className:"input-group-append search-btn",style:{borderRadius:"50%",marginRight:15},children:e.jsx("i",{className:"feather icon-search input-group-text"})}),e.jsx(F.Control,{type:"text",id:"m-search",placeholder:"Search Feature Name",value:c,onChange:k})]})})})})]})}),e.jsx(h.Body,{children:e.jsx(R,{columns:E,data:v,customStyles:D,pagination:!0,responsive:!0,striped:!0,paginationComponentOptions:{rowsPerPageText:"Rows per page:",rangeSeparatorText:"of"}})})]})})}),e.jsxs(m,{show:x,onHide:g,className:"delete-modal",children:[e.jsx(m.Header,{closeButton:!0}),e.jsxs(m.Body,{children:[e.jsx("h3",{children:"Do you really want to delete the file?"}),e.jsx("img",{src:H,alt:"Delete"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button-delete",onClick:()=>w(x),children:"Yes delete the file"}),e.jsx("button",{className:"button-cancel",onClick:()=>g(),children:"Cancel this time"})]})]})]})]})};export{q as default};
