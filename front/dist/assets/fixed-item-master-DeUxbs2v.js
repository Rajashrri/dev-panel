import{r as i,j as e,C as y,B as D,b as o}from"./index-CqonvCgs.js";import{a as J,h as q}from"./index-D378bV6i.js";import{X as U}from"./index.es-CzlDxkiB.js";import{M as h}from"./Modal-BVFbfr82.js";import{d as X}from"./delete-D3wlxJ1G.js";import{a as z}from"./index.prod-CZpgVryd.js";import{C as K}from"./Container-DWnyZsub.js";import{R as j,C as c}from"./Row-kCx33sI5.js";import{F as r}from"./Form-BsIrG47u.js";import"./CloseButton-CRqNhKfH.js";import"./setPrototypeOf-DgZC2w_0.js";const ce=()=>{const[b,B]=i.useState(""),[L,W]=i.useState(["search-input"]),[v,S]=i.useState([]),[w,g]=i.useState(!1),[P,C]=i.useState(!1),E=()=>g(!1),f=()=>{C(!1),R(null),x({name:"",details:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""})},[I,R]=i.useState(null),M=s=>{B(s.target.value)},k=()=>{},T=s=>{g(s)},F=async s=>{try{const t=await fetch(`http://localhost:5000/api/package/deleteitem/${s}`,{method:"DELETE"}),a=await t.json();t.ok==!0?(u(),g(""),o.success("Selected data Deleted Successfully"),S(n=>n.filter(p=>p._id!==s))):o.error(a.extraDetails?a.extraDetails:a.message)}catch(t){console.log(t)}},O=async s=>{try{const a=await(await fetch(`http://localhost:5000/api/package/getitemByid/${s}`,{method:"GET"})).json();x({name:a.msg[0].name,details:a.msg[0].details,actualinr:a.msg[0].actualinr,membersinr:a.msg[0].membersinr,brcoinsinr:a.msg[0].brcoinsinr,actualusd:a.msg[0].actualusd,membersusd:a.msg[0].membersusd,brcoinsusd:a.msg[0].brcoinsusd}),R(a.msg[0]._id),C(!0)}catch(t){console.log(t)}},A=async(s,t)=>{s==1?s=0:s=1;try{const a=await fetch("http://localhost:5000/api/package/update-statusitem",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,id:t})}),n=await a.json();a.ok==!0?(u(),o.success("Fixed Item Status updated Successfully")):o.error(n.extraDetails?n.extraDetails:n.message)}catch(a){o.error("Error updating status. Please try again!"),console.error("Error updating status:",a)}},u=async()=>{try{const s=await fetch("http://localhost:5000/api/package/getdata",{method:"GET"});if(!s.ok)throw new Error(`Error: ${s.status}`);const t=await s.json();S(t.msg)}catch(s){console.error("Error fetching data:",s),console.log("Failed to load data. Please try again later.")}};i.useEffect(()=>{u()},[]);const _=[{name:"Sr No #",selector:(s,t)=>t+1,sortable:!0,width:"300px"},{name:"Name",selector:s=>s.name,sortable:!0},{name:"Current Status",selector:s=>e.jsx("div",{className:"checkboxes module-switch",children:e.jsx("label",{className:"switch-label",children:e.jsx(z,{onChange:()=>A(s.status,s._id),checked:s.status==1})},s._id)}),sortable:!0},{name:"Actions",cell:s=>e.jsxs("div",{className:"module-action",children:[e.jsx("button",{onClick:()=>O(s._id),className:"btn btn-action",title:"Edit Item Master",children:e.jsx(J,{})}),e.jsx("a",{className:"btn btn-action",title:"Delete Product",variant:"primary",onClick:()=>T(s._id),children:e.jsx(q,{})})]}),style:{textAlign:"right"}}],H={rows:{style:{minHeight:"20px"}},headCells:{style:{fontWeight:"bold",fontSize:"16px",backgroundColor:"#e3f2fd"}},pagination:{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"0 5px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"}}},Y=i.useMemo(()=>v.filter(s=>s.name.toLowerCase().includes(b.toLowerCase())),[b,v]),$=()=>{C(!0)},[l,x]=i.useState({name:"",details:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""}),d=s=>{let t=s.target.name,a=s.target.value;x({...l,[t]:a})},[m,N]=i.useState({}),G=async s=>{s.preventDefault();const t={};if(l.name||(t.name="Name is required"),l.details||(t.details="Details is required"),Object.keys(t).length>0)N(t);else{const a=I;if(a)try{const n=await fetch(`http://localhost:5000/api/package/updateItem/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),p=await n.json();n.ok==!0?(f(),o.success("Update succesfully"),N(""),x({name:"",details:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""}),u()):o.error(p.msg)}catch(n){console.log("edit Features",n)}else try{const n=await fetch("http://localhost:5000/api/package/additem",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),p=await n.json();n.ok==!0?(f(),o.success("Fixed Item Added successfully!"),N(""),x({name:"",details:"",actualinr:"",membersinr:"",brcoinsinr:"",actualusd:"",membersusd:"",brcoinsusd:""}),u()):o.error(p.msg)}catch(n){console.log("Add Features",n)}}};return e.jsxs(K,{className:"list-module-preview",children:[e.jsx(j,{children:e.jsx(c,{lg:12,children:e.jsxs(y,{className:"create_new_page_card add-module module-list",children:[e.jsx(y.Header,{children:e.jsxs(j,{className:"justify-content-between",children:[e.jsx(c,{md:12,children:e.jsx("h3",{children:"Fixed Item MasterList"})}),e.jsx(c,{md:6,children:e.jsx("div",{className:"dt-buttons btn-group",children:e.jsx(D,{onClick:$,className:"btn btn-outline-secondary",children:"Add Fixed Item Master"})})}),e.jsx(c,{md:6,className:"text-end",children:e.jsx("div",{className:"data_tableHeader",children:e.jsx("div",{id:"main-search",className:L.join(" "),children:e.jsxs("div",{className:"input-group",onClick:k,children:[e.jsx("span",{onKeyDown:k,role:"button",tabIndex:"0",className:"input-group-append search-btn",style:{borderRadius:"50%",marginRight:15},children:e.jsx("i",{className:"feather icon-search input-group-text"})}),e.jsx(r.Control,{type:"text",id:"m-search",placeholder:"Search Feature Name",value:b,onChange:M})]})})})})]})}),e.jsx(y.Body,{children:e.jsx(U,{columns:_,data:Y,customStyles:H,pagination:!0,responsive:!0,striped:!0,paginationComponentOptions:{rowsPerPageText:"Rows per page:",rangeSeparatorText:"of"}})})]})})}),e.jsxs(h,{show:P,onHide:f,className:"other-icon-modal",children:[e.jsx(h.Header,{closeButton:!0}),e.jsxs(h.Body,{children:[e.jsxs("h3",{children:[I?"Edit":"Add"," Fixed Item Master"]}),e.jsxs("form",{onSubmit:G,children:[e.jsxs(j,{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"Feature Name"}),e.jsx(r.Control,{type:"text",value:l.name||"",onChange:d,name:"name",placeholder:"Feature Name"}),m.name&&e.jsx("span",{className:"text-danger",children:m.name})]})}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"Description"}),e.jsx(r.Control,{as:"textarea",rows:6,value:l.details||"",onChange:d,name:"details",placeholder:"Description"}),m.details&&e.jsx("span",{className:"text-danger",children:m.details})]})}),e.jsx("h5",{children:" PRICING"}),e.jsx("h6",{children:"INR"}),e.jsx(c,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"Actual"}),e.jsx(r.Control,{type:"text",value:l.actualinr||"",onChange:d,name:"actualinr",placeholder:"Actual"}),m.actualinr&&e.jsx("span",{className:"text-danger",children:m.actualinr})]})})}),e.jsx(c,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"MEMBERS ONLY PRICE"}),e.jsx(r.Control,{type:"text",value:l.membersinr||"",onChange:d,name:"membersinr",placeholder:"MEMBERS ONLY PRICE"})]})})}),e.jsx(c,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"BR COINS PRICE"}),e.jsx(r.Control,{type:"text",value:l.brcoinsinr||"",onChange:d,name:"brcoinsinr",placeholder:"BR COINS PRICE"})]})})}),e.jsxs(j,{children:[e.jsx("h6",{children:"USD"}),e.jsx(c,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"Actual"}),e.jsx(r.Control,{type:"text",value:l.actualusd||"",onChange:d,name:"actualusd",placeholder:"Actual"}),m.actualinr&&e.jsx("span",{className:"text-danger",children:m.actualinr})]})})}),e.jsx(c,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"MEMBERS ONLY PRICE"}),e.jsx(r.Control,{type:"text",value:l.membersusd||"",onChange:d,name:"membersusd",placeholder:"MEMBERS ONLY PRICE"})]})})}),e.jsx(c,{lg:6,children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"search-input mb-1",children:[e.jsx(r.Label,{children:"BR COINS PRICE"}),e.jsx(r.Control,{type:"text",value:l.brcoinsusd||"",onChange:d,name:"brcoinsusd",placeholder:"BR COINS PRICE"})]})})})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(D,{variant:"primary",type:"submit",children:"Submit"})})]})]})]}),e.jsxs(h,{show:w,onHide:E,className:"delete-modal",children:[e.jsx(h.Header,{closeButton:!0}),e.jsxs(h.Body,{children:[e.jsx("h3",{children:"Do you really want to delete the file?"}),e.jsx("img",{src:X,alt:"Delete"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button-delete",onClick:()=>F(w),children:"Yes delete the file"}),e.jsx("button",{className:"button-cancel",onClick:()=>E(),children:"Cancel this time"})]})]})]})]})};export{ce as default};
