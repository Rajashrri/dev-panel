import{r as a,j as e,C as c,B as n,b as u,L as j}from"./index-CqonvCgs.js";import{d as P,e as R,f as _,g as k,a as B,h as L,i as H}from"./index-D378bV6i.js";import{X as M}from"./index.es-CzlDxkiB.js";import{M as d}from"./Modal-BVFbfr82.js";import{d as T}from"./delete-D3wlxJ1G.js";import{C as $}from"./Container-DWnyZsub.js";import{R as g,C as o}from"./Row-kCx33sI5.js";import{F as A}from"./Form-BsIrG47u.js";import"./CloseButton-CRqNhKfH.js";import"./setPrototypeOf-DgZC2w_0.js";const U=()=>{const[l,f]=a.useState(""),[y,I]=a.useState(["search-input"]),[h,m]=a.useState([]),[x,i]=a.useState(!1),b=()=>i(!1),C=t=>{f(t.target.value)},p=()=>{},N=t=>{i(t)},w=async t=>{try{const s=await fetch(`http://localhost:5000/api/form/delete/${t}`,{method:"DELETE"}),r=await s.json();s.ok==!0?(i(""),u.success("Selected data Deleted Successfully"),m(D=>D.filter(F=>F._id!==t))):u.error(r.extraDetails?r.extraDetails:r.message)}catch(s){console.log(s)}};a.useEffect(()=>{(async()=>{try{const s=await fetch("http://localhost:5000/api/form/getall");if(!s.ok)throw new Error(`Error: ${s.status}`);const r=await s.json();m(r.page)}catch(s){console.error("Error fetching data:",s),setError("Failed to load data. Please try again later.")}})()},[]);const S=[{name:"Sr No #",selector:(t,s)=>s+1,sortable:!0,width:"300px"},{name:"Page Name",selector:t=>t.page_name,sortable:!0},{name:"Actions",cell:t=>e.jsxs("div",{className:"module-action",children:[e.jsx(j,{to:`/module/edit-module/${t._id}`,className:"btn btn-action",title:"Edit Product",children:e.jsx(B,{})}),e.jsx("a",{className:"btn btn-action",title:"Delete Product",variant:"primary",onClick:()=>N(t._id),children:e.jsx(L,{})}),e.jsx(j,{to:`/module-preview/add-module-preview/${t._id}`,className:"btn btn-action",title:"Preview Module",children:e.jsx(H,{})})]}),style:{textAlign:"right"}}],E={rows:{style:{minHeight:"20px"}},headCells:{style:{fontWeight:"bold",fontSize:"16px",backgroundColor:"#e3f2fd"}},pagination:{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"0 5px",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center"}}},v=a.useMemo(()=>h.filter(t=>t.page_name.toLowerCase().includes(l.toLowerCase())),[l,h]);return e.jsxs($,{children:[e.jsx(g,{children:e.jsx(o,{lg:12,children:e.jsxs(c,{className:"create_new_page_card add-module module-list",children:[e.jsx(c.Header,{children:e.jsxs(g,{className:"justify-content-between",children:[e.jsx(o,{md:12,children:e.jsx("h3",{children:"Module List"})}),e.jsx(o,{md:6,children:e.jsxs("div",{className:"dt-buttons btn-group",children:[e.jsxs(n,{className:"btn btn-outline-secondary",children:[e.jsx(P,{style:{marginRight:"5px"}}),"Copy"]}),e.jsxs(n,{className:"btn btn-outline-secondary",children:[e.jsx(R,{style:{marginRight:"5px"}}),"Excel"]}),e.jsxs(n,{className:"btn btn-outline-secondary",children:[e.jsx(_,{style:{marginRight:"5px"}}),"PDF"]}),e.jsxs(n,{className:"btn btn-outline-secondary",children:[e.jsx(k,{style:{marginRight:"5px"}}),"Print"]})]})}),e.jsx(o,{md:6,className:"text-end",children:e.jsx("div",{className:"data_tableHeader",children:e.jsx("div",{id:"main-search",className:y.join(" "),children:e.jsxs("div",{className:"input-group",onClick:p,children:[e.jsx("span",{onKeyDown:p,role:"button",tabIndex:"0",className:"input-group-append search-btn",style:{borderRadius:"50%",marginRight:15},children:e.jsx("i",{className:"feather icon-search input-group-text"})}),e.jsx(A.Control,{type:"text",id:"m-search",placeholder:"Search Page Name",value:l,onChange:C})]})})})})]})}),e.jsx(c.Body,{children:e.jsx(M,{columns:S,data:v,customStyles:E,pagination:!0,responsive:!0,striped:!0,paginationComponentOptions:{rowsPerPageText:"Rows per page:",rangeSeparatorText:"of"}})})]})})}),e.jsxs(d,{show:x,onHide:b,className:"delete-modal",children:[e.jsx(d.Header,{closeButton:!0}),e.jsxs(d.Body,{children:[e.jsx("h3",{children:"Do you really want to delete the file?"}),e.jsx("img",{src:T,alt:"Delete"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button-delete",onClick:()=>w(x),children:"Yes delete the file"}),e.jsx("button",{className:"button-cancel",children:"Cancel this time"})]})]})]})]})};export{U as default};
