import{u as b,a as w,j as e,N,B as v,b as I,r as g,R as S,C as x}from"./index-CqonvCgs.js";import{C as c,R as y}from"./Row-kCx33sI5.js";import{c as E,a as p,F as C,b as u,A as L,l as P}from"./index-Dtd34VlA.js";import{l as j}from"./logo-BPvrImub.js";import{I as k}from"./index-Bxww9KtO.js";import{F as i,a as f}from"./Form-BsIrG47u.js";import"./CloseButton-CRqNhKfH.js";import"./setPrototypeOf-DgZC2w_0.js";const F=()=>{const l=b();w();const r=E().shape({email:p().email("Must be a valid email").required("Email is required"),password:p().min(8,"Password must be at least 8 characters").required("Password is required")}),m=async(s,{setSubmitting:o,setErrors:a})=>{console.log(s);try{const t=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),n=await t.json();t.ok?(localStorage.setItem("otpemail",JSON.stringify(n.email)),I.success("Email and Password Verified Successfully"),setTimeout(()=>{l("/auth/otp-verify")},2e3)):a({submit:n.message||"Login failed"})}catch{a({submit:"Server error. Please try again later."})}o(!1)};return e.jsx(C,{initialValues:{email:"",password:""},validationSchema:r,onSubmit:m,children:({errors:s,handleBlur:o,handleChange:a,handleSubmit:t,isSubmitting:n,touched:h})=>e.jsxs("form",{noValidate:!0,onSubmit:t,children:[e.jsxs(i.Group,{className:"mb-3",controlId:"email",children:[e.jsx(f,{controlId:"floatingInput",label:"Enter Email",className:"mb-3",children:e.jsx(i.Control,{type:"email",placeholder:"Enter Email",onBlur:o,onChange:a,name:"email"})}),h.email&&s.email&&e.jsxs("small",{className:"text-danger form-text d-flex justify-content-start align-items-center gap-1",children:[e.jsx(u,{}),s.email]})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"password",children:[e.jsx(f,{controlId:"floatingInput",label:"Enter Password",className:"mb-3",children:e.jsx(i.Control,{type:"password",placeholder:"Enter Password",onBlur:o,onChange:a,name:"password"})}),h.password&&s.password&&e.jsxs("small",{className:"text-danger form-text d-flex justify-content-start align-items-center gap-1",children:[e.jsx(u,{})," ",s.password]})]}),["checkbox"].map(d=>e.jsxs("div",{className:"mb-0 mt-4 d-flex justify-content-between align-items-center gap-5",children:[e.jsx(i.Check,{type:d,id:`default-${d}`,label:"Remember me"}),e.jsx("span",{className:"mb-0 text-muted forgot",children:e.jsxs(N,{to:"/auth/forgotpassword",className:"text-muted",children:[e.jsx(k,{})," Forgot your password?"]})})]},`default-${d}`)),s.submit&&e.jsx(c,{sm:12,children:e.jsx(L,{children:s.submit})}),e.jsx(y,{className:"mt-4",children:e.jsx(c,{mt:2,children:e.jsx(v,{className:"btn-block mb-4",color:"primary",disabled:n,size:"large",type:"submit",variant:"primary",children:"Log In"})})})]})})},O=()=>{const{isLoggedIn:l}=w(),r=b();return g.useEffect(()=>{l&&r("/company/create-new-project")},[l,r]),g.useEffect(()=>{const m=new Image;m.src=j},[]),e.jsx(S.Fragment,{children:e.jsx("div",{className:"auth-wrapper",children:e.jsxs(y,{className:"auth-row",children:[e.jsxs(c,{sm:12,md:6,className:"image p-0",children:[e.jsx("img",{src:P,alt:"Login",loading:"lazy",width:"600",height:"400"}),e.jsx("div",{className:"copyright_form",children:e.jsxs("p",{children:["Copyright Â© ",new Date().getFullYear()," Dev Panel. All Rights Reserved. Powered By:"," ",e.jsx(N,{to:"https://www.digihost.in/",target:"_blank",children:"DigiHost Tech Solutions Pvt. Ltd."})]})})]}),e.jsx(c,{sm:12,md:6,className:"col-12 auth-content",children:e.jsx(x,{className:"borderless d-flex align-items-center justify-content-center",children:e.jsxs(x.Body,{children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"mb-4 text-center",children:[e.jsxs("div",{className:"logo",children:[e.jsx("img",{src:j,alt:"Logo",width:"200",height:"50"})," "]}),e.jsx("h5",{className:"mt-1",children:"Welcome Back!"}),e.jsx("p",{children:"Sign in to continue to DiigiiHost."})]})}),e.jsx(F,{})]})})})]})})})};export{O as default};
